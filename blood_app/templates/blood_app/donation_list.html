{% extends 'blood_app/base.html' %}
{% block title %}Blood Donations - Blood Donation{% endblock %}
{% block content %}
<h2 class="mb-4"><i class="bi bi-droplet-fill me-2 text-danger"></i>Blood Donations</h2>

<div class="table-responsive fade-in">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Donor</th>
        <th>Blood Group</th>
        <th>Donation Date</th>
        <th>Hospital</th>
        <th>Units</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for donation in donations %}
      <tr>
        <td>
          <div class="d-flex align-items-center gap-2">
            {% if donation.donor.photo %}
              <img src="{{ donation.donor.photo.url }}" alt="{{ donation.donor.name }}" class="rounded" style="width:40px;height:40px;object-fit:cover;">
            {% else %}
              <div class="bg-light border rounded" style="width:40px;height:40px;"></div>
            {% endif %}
            <div>
              <div class="fw-bold">{{ donation.donor.name }}</div>
              <small class="text-muted">{{ donation.donor.city }}</small>
            </div>
          </div>
        </td>
        <td><span class="badge text-bg-danger">{{ donation.blood_group }}</span></td>
        <td>{{ donation.donation_date|date:"M d, Y" }}</td>
        <td>{{ donation.hospital_name }}</td>
        <td>{{ donation.units_donated }} unit(s)</td>
        <td>
          <a href="{% url 'donation_certificate' donation.id %}" class="btn btn-sm btn-outline-danger">
            <i class="bi bi-award me-1"></i>Certificate
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted py-4">
          <i class="bi bi-emoji-frown me-2"></i>No blood donations recorded yet.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="mt-4">
  <a href="{% url 'record_donation' %}" class="btn btn-danger">
    <i class="bi bi-plus-circle me-2"></i>Record New Donation
  </a>
</div>
{% endblock %}
