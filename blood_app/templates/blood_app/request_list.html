{% extends 'blood_app/base.html' %}
{% block title %}Requests - Blood Donation{% endblock %}
{% block content %}
<h2 class="mb-3"><i class="bi bi-inboxes me-2 text-danger"></i>Blood Requests</h2>
<div class="table-responsive fade-in">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Requester</th>
        <th>Contact</th>
        <th>Blood Group</th>
        <th>Hospital</th>
        <th>Required Date</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for r in requests %}
      <tr>
        <td>{{ r.requester.name }}</td>
        <td>{{ r.requester.phone }}{% if r.requester.email %}<br><a href="mailto:{{ r.requester.email }}">{{ r.requester.email }}</a>{% endif %}</td>
        <td><span class="badge text-bg-danger">{{ r.blood_group }}</span></td>
        <td>{{ r.hospital_name }}</td>
        <td>{{ r.required_date }}</td>
        <td>
          {% if r.status == 'Approved' %}
            <span class="badge text-bg-success">{{ r.status }}</span>
          {% elif r.status == 'Rejected' %}
            <span class="badge text-bg-secondary">{{ r.status }}</span>
          {% elif r.status == 'Fulfilled' %}
            <span class="badge text-bg-primary">{{ r.status }}</span>
          {% else %}
            <span class="badge text-bg-warning">{{ r.status }}</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted py-4"><i class="bi bi-inbox me-2"></i>No requests yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


